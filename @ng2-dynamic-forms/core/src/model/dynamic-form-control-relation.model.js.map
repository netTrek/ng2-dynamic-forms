{"version":3,"sources":["core/src/model/dynamic-form-control-relation.model.ts"],"names":[],"mappings":"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","file":"dynamic-form-control-relation.model.js","sourcesContent":["import {FormGroup} from \"@angular/forms\";\n\nexport const DYNAMIC_FORM_CONTROL_ACTION_DISABLE = \"DISABLE\";\nexport const DYNAMIC_FORM_CONTROL_ACTION_ENABLE = \"ENABLE\";\n\nexport const DYNAMIC_FORM_CONTROL_CONNECTIVE_AND = \"AND\";\nexport const DYNAMIC_FORM_CONTROL_CONNECTIVE_OR = \"OR\";\n\nexport interface DynamicFormControlRelation {\n\n    id: string;\n    value?: boolean | number | string;\n    status?: string;\n}\n\nexport interface DynamicFormControlRelationGroup {\n\n    action: string;\n    connective?: string;\n    when: Array<DynamicFormControlRelation>;\n}\n\nexport function findDisableRelation(relGroups: Array<DynamicFormControlRelationGroup>): DynamicFormControlRelationGroup {\n    return relGroups.find(rel => rel.action === DYNAMIC_FORM_CONTROL_ACTION_DISABLE);\n}\n\nexport function findEnableRelation(relGroups: Array<DynamicFormControlRelationGroup>): DynamicFormControlRelationGroup {\n    return relGroups.find(rel => rel.action === DYNAMIC_FORM_CONTROL_ACTION_ENABLE);\n}\n\nexport function findActivationRelation(relGroups: Array<DynamicFormControlRelationGroup>): DynamicFormControlRelationGroup {\n    return relGroups.find(\n        rel => rel.action === DYNAMIC_FORM_CONTROL_ACTION_DISABLE || rel.action === DYNAMIC_FORM_CONTROL_ACTION_ENABLE);\n}\n\nexport function findIds(relGroups: Array<DynamicFormControlRelationGroup>): Array<string> {\n\n    let ids: Array<string> = [];\n\n    relGroups.forEach(relGroup => relGroup.when.forEach(rel => {\n\n        if (ids.indexOf(rel.id) === -1) {\n            ids.push(rel.id);\n        }\n    }));\n\n    return ids;\n}\n\nexport function toBeDisabled(relGroup: DynamicFormControlRelationGroup, formGroup: FormGroup): boolean {\n\n    return relGroup.when.reduce((toBeDisabled: boolean, rel: DynamicFormControlRelation, index: number) => {\n\n        let control = formGroup.get(rel.id);\n\n        if (control && relGroup.action === DYNAMIC_FORM_CONTROL_ACTION_DISABLE) {\n\n            if (index > 0 && relGroup.connective === DYNAMIC_FORM_CONTROL_CONNECTIVE_AND && !toBeDisabled) {\n                return false;\n            }\n\n            if (index > 0 && relGroup.connective === DYNAMIC_FORM_CONTROL_CONNECTIVE_OR && toBeDisabled) {\n                return true;\n            }\n\n            return rel.value === control.value || rel.status === control.status;\n        }\n\n        if (control && relGroup.action === DYNAMIC_FORM_CONTROL_ACTION_ENABLE) {\n\n            if (index > 0 && relGroup.connective === DYNAMIC_FORM_CONTROL_CONNECTIVE_AND && toBeDisabled) {\n                return true;\n            }\n\n            if (index > 0 && relGroup.connective === DYNAMIC_FORM_CONTROL_CONNECTIVE_OR && !toBeDisabled) {\n                return false;\n            }\n\n            return !(rel.value === control.value || rel.status === control.status);\n        }\n\n        return false;\n\n    }, false);\n}"]}